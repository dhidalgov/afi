import{c as h,q as z,r as S,a6 as B,H as j,o as E,h as d,a7 as $,v as I,a8 as D,w as O,a9 as p,g as L,aa as V,ab as K,u as W,ac as Y,ad as G,ae as F,N as J,af as U,ag as X}from"./index.30038687.js";const Z={ratio:[String,Number]};function ee(e,u){return h(()=>{const l=Number(e.ratio||(u!==void 0?u.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const te=1.7778;var ne=z({name:"QImg",props:{...Z,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:te},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:u,emit:l}){const q=S(e.initialRatio),f=ee(e,q),c=L(),{registerTimeout:m,removeTimeout:y}=B(),{registerTimeout:x,removeTimeout:w}=B(),b=h(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),C=h(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),s=[S(null),S(b.value)],t=S(0),n=S(!1),g=S(!1),_=h(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),k=h(()=>({width:e.width,height:e.height})),H=h(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),a=h(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function r(){if(w(),e.loadingShowDelay===0){n.value=!0;return}x(()=>{n.value=!0},e.loadingShowDelay)}function o(){w(),n.value=!1}function N({target:i}){p(c)===!1&&(y(),q.value=i.naturalHeight===0?.5:i.naturalWidth/i.naturalHeight,T(i,1))}function T(i,v){v===1e3||p(c)===!0||(i.complete===!0?M(i):m(()=>{T(i,v+1)},50))}function M(i){p(c)!==!0&&(t.value=t.value^1,s[t.value].value=null,o(),i.getAttribute("__qerror")!=="true"&&(g.value=!1),l("load",i.currentSrc||i.src))}function Q(i){y(),o(),g.value=!0,s[t.value].value=C.value,s[t.value^1].value=b.value,l("error",i)}function R(i){const v=s[i].value,P={key:"img_"+i,class:H.value,style:a.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...v};return t.value===i?Object.assign(P,{class:P.class+"current",onLoad:N,onError:Q}):P.class+="loaded",d("div",{class:"q-img__container absolute-full",key:"img"+i},d("img",P))}function A(){return n.value===!1?d("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},I(u[g.value===!0?"error":"default"])):d("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},u.loading!==void 0?u.loading():e.noSpinner===!0?void 0:[d(D,{color:e.spinnerColor,size:e.spinnerSize})])}{let i=function(){O(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,v=>{y(),g.value=!1,v===null?(o(),s[t.value^1].value=b.value):r(),s[t.value].value=v},{immediate:!0})};j.value===!0?E(i):i()}return()=>{const i=[];return f.value!==null&&i.push(d("div",{key:"filler",style:f.value})),s[0].value!==null&&i.push(R(0)),s[1].value!==null&&i.push(R(1)),i.push(d($,{name:"q-transition--fade"},A)),d("div",{key:"main",class:_.value,style:k.value,role:"img","aria-label":e.alt},i)}}});const ie='<g><path fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10" d="M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"></path><clipPath id="uil-hourglass-clip1"><rect x="15" y="20" width="70" height="25"><animate attributeName="height" from="25" to="0" dur="1s" repeatCount="indefinite" values="25;0;0" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="20" to="45" dur="1s" repeatCount="indefinite" values="20;45;45" keyTimes="0;0.5;1"></animate></rect></clipPath><clipPath id="uil-hourglass-clip2"><rect x="15" y="55" width="70" height="25"><animate attributeName="height" from="0" to="25" dur="1s" repeatCount="indefinite" values="0;25;25" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="80" to="55" dur="1s" repeatCount="indefinite" values="80;55;55" keyTimes="0;0.5;1"></animate></rect></clipPath><path d="M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z" clip-path="url(#uil-hourglass-clip1)" fill="currentColor"></path><path d="M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z" clip-path="url(#uil-hourglass-clip2)" fill="currentColor"></path><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" repeatCount="indefinite" dur="1s" values="0 50 50;0 50 50;180 50 50" keyTimes="0;0.7;1"></animateTransform></g>';var re=z({name:"QSpinnerHourglass",props:V,setup(e){const{cSize:u,classes:l}=K(e);return()=>d("svg",{class:l.value,width:u.value,height:u.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:ie})}}),oe=z({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:u,emit:l}){const q=L(),f=S(null);let c=0;const m=[];function y(t){const n=typeof t=="boolean"?t:e.noErrorFocus!==!0,g=++c,_=(a,r)=>{l(`validation${a===!0?"Success":"Error"}`,r)},k=a=>{const r=a.validate();return typeof r.then=="function"?r.then(o=>({valid:o,comp:a}),o=>({valid:!1,comp:a,err:o})):Promise.resolve({valid:r,comp:a})};return(e.greedy===!0?Promise.all(m.map(k)).then(a=>a.filter(r=>r.valid!==!0)):m.reduce((a,r)=>a.then(()=>k(r).then(o=>{if(o.valid===!1)return Promise.reject(o)})),Promise.resolve()).catch(a=>[a])).then(a=>{if(a===void 0||a.length===0)return g===c&&_(!0),!0;if(g===c){const{comp:r,err:o}=a[0];if(o!==void 0&&console.error(o),_(!1,r),n===!0){const N=a.find(({comp:T})=>typeof T.focus=="function"&&p(T.$)===!1);N!==void 0&&N.comp.focus()}}return!1})}function x(){c++,m.forEach(t=>{typeof t.resetValidation=="function"&&t.resetValidation()})}function w(t){t!==void 0&&F(t);const n=c+1;y().then(g=>{n===c&&g===!0&&(e.onSubmit!==void 0?l("submit",t):t!==void 0&&t.target!==void 0&&typeof t.target.submit=="function"&&t.target.submit())})}function b(t){t!==void 0&&F(t),l("reset"),J(()=>{x(),e.autofocus===!0&&e.noResetFocus!==!0&&C()})}function C(){U(()=>{if(f.value===null)return;const t=f.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||f.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||f.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(f.value.querySelectorAll("[tabindex]"),n=>n.tabIndex!==-1);t!=null&&t.focus({preventScroll:!0})})}W(X,{bindComponent(t){m.push(t)},unbindComponent(t){const n=m.indexOf(t);n!==-1&&m.splice(n,1)}});let s=!1;return Y(()=>{s=!0}),G(()=>{s===!0&&e.autofocus===!0&&C()}),E(()=>{e.autofocus===!0&&C()}),Object.assign(q.proxy,{validate:y,resetValidation:x,submit:w,reset:b,focus:C,getValidationComponents:()=>m}),()=>d("form",{class:"q-form",ref:f,onSubmit:w,onReset:b},I(u.default))}});export{oe as Q,ne as a,re as b};
